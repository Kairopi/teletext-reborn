/**
 * Teletext Reborn - Premium CRT Visual Effects
 * 
 * AAA-quality CRT television effects for authentic retro experience.
 * FIXED FRAME SIZE - The TV bezel NEVER changes dimensions.
 * 
 * Requirements: 2.3, 2.4, 2.13, 24.1-24.8
 */

/* ============================================
   PREMIUM TV BEZEL - FIXED SIZE FRAME
   Like real hardware - the case NEVER resizes
   ============================================ */

.tv-bezel {
  position: relative;
  padding: 16px;
  
  /* Premium dark metallic gradient */
  background: linear-gradient(
    145deg,
    #4a4a4a 0%,
    #2d2d2d 25%,
    #1a1a1a 60%,
    #0d0d0d 100%
  );
  
  border-radius: 24px;
  
  /* Premium depth shadows */
  box-shadow: 
    0 20px 60px rgba(0, 0, 0, 0.7),
    0 8px 24px rgba(0, 0, 0, 0.5),
    inset 0 2px 0 rgba(255, 255, 255, 0.1),
    inset 0 -4px 8px rgba(0, 0, 0, 0.5);
  
  /* FIXED WIDTH - matches screen + padding */
  width: 912px;
  max-width: 912px;
  
  /* Content stays inside */
  overflow: hidden;
  
  /* Prevent resizing */
  flex-shrink: 0;
  flex-grow: 0;
  
  /* Containing block */
  contain: layout;
}

/* Inner recessed shadow */
.tv-bezel::before {
  content: '';
  position: absolute;
  inset: 14px;
  border-radius: 18px;
  box-shadow: 
    inset 0 0 40px rgba(0, 0, 0, 0.9),
    inset 0 0 15px rgba(0, 0, 0, 0.6);
  pointer-events: none;
  z-index: 1;
}

/* Power LED indicator */
.tv-bezel::after {
  content: '';
  position: absolute;
  bottom: 10px;
  right: 20px;
  width: 6px;
  height: 6px;
  background: var(--tt-green, #00FF00);
  border-radius: 50%;
  box-shadow: 
    0 0 4px var(--tt-green, #00FF00),
    0 0 8px var(--tt-green, #00FF00);
  animation: led-pulse 2s ease-in-out infinite;
  z-index: 20;
}

@keyframes led-pulse {
  0%, 100% { opacity: 1; box-shadow: 0 0 4px var(--tt-green, #00FF00), 0 0 8px var(--tt-green, #00FF00); }
  50% { opacity: 0.6; box-shadow: 0 0 2px var(--tt-green, #00FF00); }
}

/* ============================================
   SCANLINES OVERLAY
   ============================================ */

.scanlines {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 10;
  background: repeating-linear-gradient(
    0deg,
    transparent 0px,
    transparent 1px,
    rgba(0, 0, 0, 0.2) 1px,
    rgba(0, 0, 0, 0.35) 2px
  );
}

.scanlines-disabled .scanlines {
  display: none;
}

/* ============================================
   PHOSPHOR GLOW EFFECT
   ============================================ */

.phosphor-glow {
  text-shadow: 
    0 0 2px currentColor,
    0 0 5px rgba(255, 255, 0, 0.4);
}

.glow-yellow {
  text-shadow: 0 0 2px var(--tt-yellow, #FFFF00), 0 0 5px rgba(255, 255, 0, 0.4);
}

.glow-cyan {
  text-shadow: 0 0 2px var(--tt-cyan, #00FFFF), 0 0 5px rgba(0, 255, 255, 0.4);
}

.glow-green {
  text-shadow: 0 0 2px var(--tt-green, #00FF00), 0 0 5px rgba(0, 255, 0, 0.4);
}

.glow-red {
  text-shadow: 0 0 2px var(--tt-red, #FF0000), 0 0 5px rgba(255, 0, 0, 0.4);
}

.glow-white {
  text-shadow: 0 0 2px var(--tt-white, #FFFFFF), 0 0 5px rgba(255, 255, 255, 0.4);
}

.glow-magenta {
  text-shadow: 0 0 2px var(--tt-magenta, #FF00FF), 0 0 5px rgba(255, 0, 255, 0.4);
}

/* ============================================
   VIGNETTE EFFECT
   ============================================ */

.vignette {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 5;
  background: radial-gradient(
    ellipse at center,
    transparent 45%,
    rgba(0, 0, 0, 0.35) 80%,
    rgba(0, 0, 0, 0.55) 100%
  );
}

/* ============================================
   GLASS REFLECTION OVERLAY
   ============================================ */

.glass-reflection {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 15;
  background: 
    linear-gradient(
      180deg,
      rgba(255, 255, 255, 0.06) 0%,
      transparent 25%
    ),
    linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.1) 0%,
      rgba(255, 255, 255, 0.04) 20%,
      transparent 45%
    );
}

/* ============================================
   RGB CHROMATIC ABERRATION
   ============================================ */

.rgb-separation {
  text-shadow:
    -1px 0 rgba(255, 0, 0, 0.4),
    1px 0 rgba(0, 0, 255, 0.4);
}

.crt-text {
  text-shadow:
    0 0 2px currentColor,
    0 0 4px rgba(255, 255, 0, 0.25),
    -0.5px 0 rgba(255, 0, 0, 0.15),
    0.5px 0 rgba(0, 0, 255, 0.15);
}

/* ============================================
   NOISE TEXTURE OVERLAY
   ============================================ */

.noise-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 12;
  opacity: 0.025;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
}

/* ============================================
   STATIC/NOISE EFFECT FOR TRANSITIONS
   ============================================ */

.static-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 50;
  opacity: 0;
  background: 
    repeating-linear-gradient(0deg, rgba(255, 255, 255, 0.04) 0px, rgba(0, 0, 0, 0.04) 1px),
    repeating-linear-gradient(90deg, rgba(255, 255, 255, 0.04) 0px, rgba(0, 0, 0, 0.04) 1px);
  animation: static-noise 0.05s steps(10) infinite;
}

@keyframes static-noise {
  0% { background-position: 0 0, 0 0; }
  25% { background-position: 2px 1px, -1px 2px; }
  50% { background-position: -1px -2px, 2px -1px; }
  75% { background-position: 1px 2px, -2px 1px; }
  100% { background-position: -2px -1px, 1px -2px; }
}

.static-overlay.visible {
  opacity: 0.5;
}

/* ============================================
   IDLE SCREEN FLICKER
   ============================================ */

.idle-flicker {
  animation: idle-brightness 4s ease-in-out infinite;
}

@keyframes idle-brightness {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.97; }
}

/* ============================================
   CRT WARM-UP LINE (Boot Animation)
   ============================================ */

.crt-line {
  position: absolute;
  top: 50%;
  left: 0;
  right: 0;
  height: 2px;
  background: var(--tt-white, #FFFFFF);
  transform: scaleY(0);
  transform-origin: center;
  box-shadow: 0 0 10px var(--tt-white, #FFFFFF);
}

/* ============================================
   FLASH OVERLAY (Time Travel Animation)
   ============================================ */

.flash-overlay {
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 100;
  background: var(--tt-white, #FFFFFF);
  opacity: 0;
}

/* ============================================
   CRT CONTAINER
   ============================================ */

.crt-container {
  position: relative;
  overflow: hidden;
  border-radius: 20px;
}

.crt-container::before {
  content: '';
  position: absolute;
  inset: 0;
  pointer-events: none;
  z-index: 5;
  background: radial-gradient(
    ellipse at center,
    transparent 45%,
    rgba(0, 0, 0, 0.35) 80%,
    rgba(0, 0, 0, 0.55) 100%
  );
}

/* ============================================
   REDUCED MOTION SUPPORT
   ============================================ */

@media (prefers-reduced-motion: reduce) {
  .idle-flicker,
  .static-overlay {
    animation: none;
  }
  
  .tv-bezel::after {
    animation: none;
  }
}

/* ============================================
   EFFECT TOGGLE CLASSES
   ============================================ */

.no-scanlines .scanlines { display: none; }
.no-vignette .vignette { display: none; }
.no-glow .phosphor-glow { text-shadow: none; }
.no-noise .noise-overlay { display: none; }
.no-reflection .glass-reflection { display: none; }

/* ============================================
   RESPONSIVE TV BEZEL
   ============================================ */

@media (max-width: 920px) {
  .tv-bezel {
    width: 100%;
    max-width: 100%;
    padding: 12px;
    border-radius: 18px;
  }
}

@media (max-width: 600px) {
  .tv-bezel {
    padding: 10px;
    border-radius: 14px;
  }
}
